import{a as y,c as O,d as S,f as _,g as k,h as x,i as F,k as E}from"./chunk-D4IGXCH5.js";import{a as C}from"./chunk-RM5XOPUU.js";import"./chunk-4HTAPEXL.js";import{a as b}from"./chunk-PGFDRZJQ.js";import{$ as d,Cb as r,Kb as g,Ma as m,S as c,Y as s,bb as u,db as p,hb as f,lb as n,mb as i,nb as l,sb as h,uc as v}from"./chunk-TVMHYBVC.js";var w=(()=>{class t{constructor(){this._HttpClient=s(v),this.url=window.location.origin}checkOut(e,o){return this._HttpClient.post(`${b.baseUrl}/api/v1/orders/checkout-session/${e}?url=${this.url}`,{shippingAddress:o})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function I(t,D){t&1&&l(0,"i",11)}var q=(()=>{class t{constructor(){this._FormBuilder=s(F),this._OrderService=s(w),this._ActivatedRoute=s(C),this.checkOutForm=this._FormBuilder.group({details:[null,[]],phone:[null,[]],city:[null,[]]}),this.isloading=!1}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{this.cartId=e.get("id"),console.log(this.cartId)},error:e=>{console.log(e)}})}checkOut(){this.isloading=!0,this.checkOutSub=this._OrderService.checkOut(this.cartId,this.checkOutForm.value).subscribe({next:e=>{console.log(e),window.open(`/Fresh-Cart-E-Commerce${e.session.url}`,"_self")},error:e=>{this.isloading=!1,console.log(e)},complete:()=>{this.isloading=!1}})}ngOnDestroy(){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=d({type:t,selectors:[["app-orders"]],standalone:!0,features:[g],decls:20,vars:2,consts:[[1,"bg-main-light","shadow","show","p-5","my-3","rounded","container"],[1,"h3","text-main","mb-3"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","details"],["type","text","id","details","name","details","formControlName","details",1,"form-control"],["for","phone"],["type","tel","id","phone","name","phone","formControlName","phone",1,"form-control"],["for","city"],["type","text","id","city","name","city","formControlName","city",1,"form-control"],["type","submit",1,"btn-main","d-block","ms-auto","mt-3"],[1,"fas","fa-spin","fa-spinner"]],template:function(o,a){o&1&&(n(0,"section",0)(1,"H3",1),r(2,"Check Out"),i(),n(3,"form",2),h("ngSubmit",function(){return a.checkOut()}),n(4,"div",3)(5,"label",4),r(6,"Details:"),i(),n(7,"textarea",5),r(8,"      "),i()(),n(9,"div",3)(10,"label",6),r(11,"Phone:"),i(),l(12,"input",7),i(),n(13,"div",3)(14,"label",8),r(15,"City:"),i(),l(16,"input",9),i(),n(17,"button",10),r(18," Check-Out "),u(19,I,1,0,"i",11),i()()()),o&2&&(m(3),p("formGroup",a.checkOutForm),m(16),f(19,a.isloading?19:-1))},dependencies:[E,_,y,O,S,k,x]})}}return t})();export{q as OrdersComponent};
