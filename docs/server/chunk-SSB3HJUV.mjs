import './polyfills.server.mjs';
import{a as $}from"./chunk-DOWFZRFL.mjs";import{a as O}from"./chunk-7HE5MFKJ.mjs";import{a as G}from"./chunk-DEXJ2UMT.mjs";import{a as z}from"./chunk-GCNPNJLI.mjs";import{a as A}from"./chunk-J22WE2WV.mjs";import"./chunk-J4BDXTMW.mjs";import{a as D,c as N,e as j,j as B}from"./chunk-TQFFRULN.mjs";import"./chunk-EF2HFKWS.mjs";import{e as I}from"./chunk-CESV4JBY.mjs";import"./chunk-P6M526BC.mjs";import{Db as a,Eb as f,Fb as y,Hb as T,Ib as L,Ja as g,Jb as k,Lb as E,Mb as F,Na as s,Qb as V,Sb as M,V as m,Z as S,cb as P,eb as v,ha as u,ia as p,ib as W,kb as b,lb as w,mb as r,nb as n,ob as C,rb as _,tb as h,ub as c}from"./chunk-VSZ2F6JD.mjs";import"./chunk-VVCT4QZE.mjs";var R=(i,d)=>d.id,U=i=>["/detalis",i];function q(i,d){if(i&1){let t=_();r(0,"i",15),h("click",function(){u(t);let o=c().$implicit,l=c();return p(l.removeWishList(o.id))}),n()}}function H(i,d){if(i&1){let t=_();r(0,"i",16),h("click",function(){u(t);let o=c().$implicit,l=c();return p(l.addWishList(o.id))}),n()}}function J(i,d){if(i&1){let t=_();r(0,"div",4)(1,"div",5)(2,"div",6),C(3,"img",7),r(4,"h2",8),a(5),n(),r(6,"h3",9),a(7),n(),r(8,"div",10)(9,"span"),a(10),n(),r(11,"div")(12,"span"),C(13,"i",11),n(),r(14,"span"),a(15),n()()()(),r(16,"div",12),P(17,q,1,0,"i",13)(18,H,1,0),r(19,"button",14),h("click",function(){let o=u(t).$implicit,l=c();return p(l.addCart(o.id))}),a(20," Add To Cart "),n()()()()}if(i&2){let t=d.$implicit,e=c();s(2),v("routerLink",F(8,U,t.id)),s(),v("src",t.imageCover,g)("alt",t.title),s(2),f(t.category.name),s(2),f(t.title.split(" ",2).join(" ")),s(3),y("",t.price," EGP"),s(5),f(t.ratingsAverage),s(2),W(17,e.idProductWishlist.includes(t.id)?17:18)}}var st=(()=>{class i{constructor(){this._ProductsService=m(O),this._CartService=m(A),this._ToastrService=m(z),this._WishListService=m(G),this.listProduct=[],this.text="",this.idProductWishlist=[]}ngOnInit(){this.allProductSub=this._ProductsService.getAllProducts().subscribe({next:t=>{this.listProduct=t.data},error:t=>{console.log(t)}}),this._WishListService.getWishList().subscribe({next:t=>{this.idProductWishlist=t.data.map(e=>e._id)},error:t=>{console.log(t)}})}ngOnDestroy(){this.allProductSub?.unsubscribe()}addCart(t){this._CartService.addtoCart(t).subscribe({next:e=>{this._ToastrService.success(e.message),this._CartService.cartNumber.next(e.numOfCartItems)},error:e=>{console.log(e)}})}addWishList(t){this._WishListService.addWishList(t).subscribe({next:e=>{this._ToastrService.success(e.message),this.idProductWishlist.push(t)},error:e=>{this._ToastrService.error(e.error.message)}})}removeWishList(t){this._WishListService.removeWishList(t).subscribe({next:e=>{this._ToastrService.info(e.message),this.idProductWishlist=this.idProductWishlist.filter(o=>o!==t)},error:e=>{this._ToastrService.error(e.error.message)}})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-product"]],standalone:!0,features:[E],decls:9,vars:4,consts:[[1,"text-main","text-center","my-4"],[1,"container-fluid","my-4"],["type","search","placeholder","Search By Name...",1,"form-control","my-3","w-50","mx-auto",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-md-2"],[1,"product","p-2"],[1,"cursor-pointer",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main","mt-1"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fas","fa-star","rating-color"],[1,"d-flex"],[1,"fa-solid","fa-heart","fa-xl","mx-auto","mt-4","cursor-pointer",2,"color","red"],[1,"btn-main","w-75","mt-2","ms-auto","d-block",3,"click"],[1,"fa-solid","fa-heart","fa-xl","mx-auto","mt-4","cursor-pointer",2,"color","red",3,"click"],[1,"fa-solid","fa-heart","fa-xl","mx-auto","mt-4","cursor-pointer",3,"click"]],template:function(e,o){e&1&&(r(0,"section")(1,"h1",0),a(2,"All Products"),n(),r(3,"div",1)(4,"input",2),k("ngModelChange",function(x){return L(o.text,x)||(o.text=x),x}),n(),r(5,"div",3),b(6,J,21,10,"div",4,R),V(8,"search"),n()()()),e&2&&(s(4),T("ngModel",o.text),s(2),w(M(8,1,o.listProduct,o.text)))},dependencies:[B,D,N,j,I,$]})}}return i})();export{st as ProductComponent};
