import './polyfills.server.mjs';
import{a as L}from"./chunk-DBXTZLTR.mjs";import{a as w,b as u,c as x,d as F,f as y,g as E,h as M,i as N,k as T}from"./chunk-TQFFRULN.mjs";import"./chunk-EF2HFKWS.mjs";import{d as _,e as C}from"./chunk-CESV4JBY.mjs";import"./chunk-P6M526BC.mjs";import{Db as n,Eb as v,Lb as b,Na as a,V as m,Z as f,cb as p,eb as c,ib as l,mb as i,nb as o,ob as d,tb as h,ub as S}from"./chunk-VSZ2F6JD.mjs";import"./chunk-VVCT4QZE.mjs";function D(e,g){if(e&1&&(i(0,"p",9),n(1),o()),e&2){let t=S();a(),v(t.errorMessage)}}function k(e,g){e&1&&(i(0,"p",10),n(1,"Login Success"),o())}function A(e,g){e&1&&(i(0,"span"),d(1,"i",12),o())}var P=(()=>{class e{constructor(){this.isLoading=!1,this.msgSuccess=!1,this.errorMessage="",this._formBuilder=m(N),this._AuthService=m(L),this._Router=m(_),this.loginForm=this._formBuilder.group({email:[null,[u.required,u.email]],password:[null,[u.required]]})}loginSubmit(){this.isLoading=!0,this.loginSub=this._AuthService.setloginForm(this.loginForm.value).subscribe({next:t=>{this.msgSuccess=!0,this.errorMessage="",console.log(t),t.message=="success"&&setTimeout(()=>{localStorage.setItem("userToken",t.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},2e3)},error:t=>{console.log(t),this.isLoading=!1,this.errorMessage=t.error.message}})}ngOnDestroy(){this.loginSub?.unsubscribe()}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275cmp=f({type:e,selectors:[["app-login"]],standalone:!0,features:[b],decls:20,vars:5,consts:[[1,"bg-main-light","shadow","show","p-5","my-3","rounded"],[1,"h2","text-main","mb-4"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","email","name","email","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","name","password","id","password","formControlName","password",1,"form-control"],["routerLink","/forget",1,"text-main"],[1,"alert","alert-danger"],[1,"alert","alert-success"],["type","submit",1,"btn","btn-main","d-block","mt-4","ms-auto",3,"disabled"],[1,"fas","fa-spin","fa-spinner"]],template:function(s,r){s&1&&(i(0,"section",0)(1,"h1",1),n(2,"Login Now:"),o(),i(3,"div")(4,"form",2),h("ngSubmit",function(){return r.loginSubmit()}),i(5,"div",3)(6,"label",4),n(7,"Email:"),o(),d(8,"input",5),o(),i(9,"div",3)(10,"label",6),n(11,"password:"),o(),d(12,"input",7),i(13,"a",8),n(14,"Forget Password?"),o()(),p(15,D,2,1,"p",9)(16,k,2,0,"p",10),i(17,"button",11),n(18," Login "),p(19,A,2,0,"span"),o()()()()),s&2&&(a(4),c("formGroup",r.loginForm),a(11),l(15,r.errorMessage?15:-1),a(),l(16,r.msgSuccess?16:-1),a(),c("disabled",r.loginForm.invalid||r.isLoading),a(2),l(19,r.isLoading?19:-1))},dependencies:[T,y,w,x,F,E,M,C]})}}return e})();export{P as LoginComponent};
