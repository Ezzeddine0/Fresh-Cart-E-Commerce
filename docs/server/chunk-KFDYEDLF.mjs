import './polyfills.server.mjs';
import{a as O}from"./chunk-FQMAR4HG.mjs";import{a as M}from"./chunk-J22WE2WV.mjs";import"./chunk-EF2HFKWS.mjs";import{e as I}from"./chunk-CESV4JBY.mjs";import"./chunk-P6M526BC.mjs";import{Db as l,Eb as v,Fb as b,Ja as k,Lb as E,Mb as T,Na as a,Qb as V,Sb as F,V as h,Z as S,cb as x,eb as m,ha as p,ia as u,ib as f,kb as y,lb as w,mb as n,nb as r,ob as _,rb as g,tb as C,ub as s}from"./chunk-VSZ2F6JD.mjs";import"./chunk-VVCT4QZE.mjs";var P=(i,d)=>d.product.id,B=i=>["/orders",i];function $(i,d){i&1&&_(0,"i",5)}function j(i,d){if(i&1){let t=g();n(0,"div",8)(1,"div")(2,"div",6)(3,"div",9),_(4,"img",10),V(5,"termtext"),r(),n(6,"div",8)(7,"p"),l(8),r(),n(9,"p",11),l(10),r(),n(11,"button",12),C("click",function(){let o=p(t).$implicit,c=s(2);return u(c.removeItemFromCart(o.product.id))}),_(12,"i",13),n(13,"span"),l(14," remove"),r()()()()()(),n(15,"div",9)(16,"div",14)(17,"button",15),C("click",function(){let o=p(t).$implicit,c=s(2);return u(c.updateCartQuantity(o.product.id,o.count+1))}),l(18," + "),r(),n(19,"span",16),l(20),r(),n(21,"button",15),C("click",function(){let o=p(t).$implicit,c=s(2);return u(c.updateCartQuantity(o.product.id,o.count-1))}),l(22," - "),r()()(),_(23,"hr")}if(i&2){let t=d.$implicit,e=s(2);a(4),m("src",t.product.imageCover,k)("alt",F(5,8,t.product.title,2)),a(4),v(t.product.title),a(2),b("Price: ",t.price,""),a(),m("disabled",e.isloading),a(6),m("disabled",e.isloading),a(3),v(t.count),a(),m("disabled",e.isloading)}}function Q(i,d){if(i&1){let t=g();n(0,"h3",1),l(1,"Shop Cart:"),r(),n(2,"div",2)(3,"p",3),l(4),r(),n(5,"button",4),C("click",function(){p(t);let o=s();return u(o.deleteCart())}),l(6," Clear Cart "),x(7,$,1,0,"i",5),r()(),n(8,"div",6),y(9,j,24,11,null,null,P),r(),n(11,"button",7),l(12," Check Out "),r()}if(i&2){let t=s();a(4),b("Total Cart Price: ",t.cart.totalCartPrice,""),a(3),f(7,t.isloading?7:-1),a(2),w(t.cart.products),a(2),m("routerLink",T(3,B,t.cart._id))}}function D(i,d){i&1&&(n(0,"p",17),l(1,"There is no item in the Cart."),r())}var A=(()=>{class i{constructor(){this._CartService=h(M),this.isloading=!1}ngOnInit(){this._CartService.getUserCart().subscribe({next:t=>{this.cart=t.data,console.log(t.data)},error:t=>{console.log(t)}})}updateCartQuantity(t,e){if(e>0){this.isloading=!0;let o=e.toString();this._CartService.updataCartQuantity(t,o).subscribe({next:c=>{console.log(c),this.cart=c.data,this.isloading=!1},error:c=>{console.log(c),this.isloading=!1}})}}removeItemFromCart(t){this.isloading=!0,this._CartService.removeItem(t).subscribe({next:e=>{this._CartService.cartNumber.next(e.numOfCartItems),console.log(e),this.cart=e.data,this.isloading=!1},error:e=>{console.log(e),this.isloading=!1}})}deleteCart(){this.isloading=!0,this._CartService.deleteCart().subscribe({next:t=>{this._CartService.cartNumber.next(0),console.log(t),this.cart={},this.isloading=!1},error:t=>{console.log(t),this.isloading=!1}})}ngOnDestroy(){}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-cart"]],standalone:!0,features:[E],decls:3,vars:1,consts:[[1,"border","container","bg-main-light","p-4"],[1,"h3"],[1,"d-flex","justify-content-between"],[1,"text-main","h6","mb-4"],[1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-spin","fa-spinner"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"btn-main","d-block","ms-auto","mx-sm-auto",3,"routerLink"],[1,"col-md-10"],[1,"col-md-2"],[1,"w-100",3,"src","alt"],[1,"text-main","me-3"],[1,"removeBtn",3,"click","disabled"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-items-center","justify-content-center","mb-sm-2"],[1,"plusMinusBtn",3,"click","disabled"],[1,"mx-2"],[1,"text-center","h4","text-main"]],template:function(e,o){e&1&&(n(0,"section",0),x(1,Q,13,5)(2,D,2,0),r()),e&2&&(a(),f(1,o.cart._id!=null?1:2))},dependencies:[O,I],styles:[".removeBtn[_ngcontent-%COMP%]{background-color:transparent;border:none}.removeBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main-color)}.plusMinusBtn[_ngcontent-%COMP%]{background:transparent;border-color:var(--main-color);padding:2px 7px;border-radius:5px}"]})}}return i})();export{A as CartComponent};
