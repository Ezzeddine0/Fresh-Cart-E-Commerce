import{a as N}from"./chunk-R54IZMUC.js";import{a as P,b as p,c as q,d as M,f as L,g as D,h as A,i as G,k as B}from"./chunk-D4IGXCH5.js";import{c as y}from"./chunk-RM5XOPUU.js";import"./chunk-4HTAPEXL.js";import"./chunk-PGFDRZJQ.js";import{$ as S,Cb as o,Db as w,Kb as b,Ma as m,Mb as R,Y as v,bb as u,db as E,hb as d,ic as T,lb as n,mb as i,nb as g,sb as x,tb as _}from"./chunk-TVMHYBVC.js";var I=(e,l)=>({"is-valid":e,"is-invalid":l});function V(e,l){e&1&&(n(0,"p"),o(1,"Name is required"),i())}function $(e,l){e&1&&(n(0,"p"),o(1,"Name should be more than 3 Characters"),i())}function j(e,l){e&1&&(n(0,"p"),o(1,"Name should be less than 12 Characters"),i())}function k(e,l){if(e&1&&(n(0,"div",6),u(1,V,2,0,"p")(2,$,2,0)(3,j,2,0),i()),e&2){let t,a=_();m(),d(1,(t=a.registerForm.get("name"))!=null&&t.getError("required")?1:(t=a.registerForm.get("name"))!=null&&t.getError("minlength")?2:(t=a.registerForm.get("name"))!=null&&t.getError("maxlength")?3:-1)}}function O(e,l){e&1&&(n(0,"p"),o(1,"Email is required"),i())}function z(e,l){e&1&&(n(0,"p"),o(1,"Email must end with @ex.com"),i())}function H(e,l){if(e&1&&(n(0,"div",6),u(1,O,2,0,"p")(2,z,2,0),i()),e&2){let t,a=_();m(),d(1,(t=a.registerForm.get("email"))!=null&&t.getError("required")?1:(t=a.registerForm.get("email"))!=null&&t.getError("email")?2:-1)}}function J(e,l){e&1&&(n(0,"p"),o(1,"Password is required"),i())}function K(e,l){e&1&&(n(0,"p"),o(1,"Invalid Password"),i())}function Q(e,l){if(e&1&&(n(0,"div",6),u(1,J,2,0,"p")(2,K,2,0),i()),e&2){let t,a=_();m(),d(1,(t=a.registerForm.get("password"))!=null&&t.getError("required")?1:(t=a.registerForm.get("password"))!=null&&t.getError("pattern")?2:-1)}}function U(e,l){e&1&&(n(0,"div",6)(1,"p"),o(2,"Password is not matched!"),i()())}function W(e,l){e&1&&(n(0,"p"),o(1,"phone is required"),i())}function X(e,l){e&1&&(n(0,"p"),o(1,"Invalid phone number"),i())}function Y(e,l){if(e&1&&(n(0,"div",6),u(1,W,2,0,"p")(2,X,2,0),i()),e&2){let t,a=_();m(),d(1,(t=a.registerForm.get("phone"))!=null&&t.getError("required")?1:(t=a.registerForm.get("phone"))!=null&&t.getError("pattern")?2:-1)}}function Z(e,l){e&1&&(n(0,"span"),g(1,"i",18),i())}function ee(e,l){if(e&1&&(n(0,"p",16),o(1),i()),e&2){let t=_();m(),w(t.errorMessage)}}function te(e,l){e&1&&(n(0,"p",17),o(1,"success"),i())}var de=(()=>{class e{constructor(){this.errorMessage="",this.successMessage=!1,this.isLoading=!1,this._AuthService=v(N),this._FormBuilder=v(G),this._Router=v(y),this.registerForm=this._FormBuilder.group({name:[null,[p.required,p.minLength(3),p.maxLength(12)]],email:[null,[p.required,p.email]],password:[null,[p.required,p.pattern(/^\w{6,}$/)]],rePassword:[null],phone:[null,[p.required,p.pattern(/^01[0125][0-9]{8}$/)]]},{validators:[this.confirmPassword]})}confirmPassword(t){return t.get("password")?.value===t.get("rePassword")?.value?null:{mismatch:!0}}registerSubmit(){this.isLoading=!0,this.registerForm.valid&&(this.registerSub=this._AuthService.setRegisterForm(this.registerForm.value).subscribe({next:t=>{console.log(t),t.message=="success"&&(this.successMessage=!0,setTimeout(()=>{this._Router.navigate(["/login"])},2e3))},error:t=>{this.errorMessage=t.error.message,this.isLoading=!1,console.log(this.errorMessage)}}),console.log(this.registerForm))}ngOnDestroy(){this.registerSub?.unsubscribe()}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=S({type:e,selectors:[["app-register"]],standalone:!0,features:[b],decls:34,vars:14,consts:[[1,"bg-main-light","shadow","show","p-5","my-3","rounded"],[1,"h2","text-main","mb-4"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","name"],["id","name","name","name","type","text","formControlName","name",1,"form-control",3,"ngClass"],[1,"alert","alert-danger"],["for","email"],["id","email","name","email","type","email","formControlName","email",1,"form-control"],["for","password"],["id","password","name","password","type","password","formControlName","password",1,"form-control"],["for","rePassword"],["id","rePassword","name","rePassword","type","password","formControlName","rePassword",1,"form-control"],["for","phone"],["id","phone","name","phone","type","text","formControlName","phone",1,"form-control"],["type","submit",1,"btn","btn-main","d-block","mt-4","ms-auto",3,"disabled"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"],[1,"fas","fa-spin","fa-spinner"]],template:function(a,r){if(a&1&&(n(0,"section",0)(1,"h1",1),o(2,"Register Now:"),i(),n(3,"form",2),x("ngSubmit",function(){return r.registerSubmit()}),n(4,"div",3)(5,"label",4),o(6,"name:"),i(),g(7,"input",5),u(8,k,4,1,"div",6),i(),n(9,"div",3)(10,"label",7),o(11,"email:"),i(),g(12,"input",8),u(13,H,3,1,"div",6),i(),n(14,"div",3)(15,"label",9),o(16,"password:"),i(),g(17,"input",10),u(18,Q,3,1,"div",6),i(),n(19,"div",3)(20,"label",11),o(21,"rePassword:"),i(),g(22,"input",12),u(23,U,3,0,"div",6),i(),n(24,"div",3)(25,"label",13),o(26,"phone:"),i(),g(27,"input",14),u(28,Y,3,1,"div",6),i(),n(29,"button",15),o(30," Register "),u(31,Z,2,0,"span"),i(),u(32,ee,2,1,"p",16)(33,te,2,0,"p",17),i()()),a&2){let s,c,f,C,F,h;m(3),E("formGroup",r.registerForm),m(4),E("ngClass",R(11,I,!((s=r.registerForm.get("name"))!=null&&s.errors)&&(((s=r.registerForm.get("name"))==null?null:s.touched)||((s=r.registerForm.get("name"))==null?null:s.dirty)),((s=r.registerForm.get("name"))==null?null:s.errors)&&(((s=r.registerForm.get("name"))==null?null:s.touched)||((s=r.registerForm.get("name"))==null?null:s.dirty)))),m(),d(8,(c=r.registerForm.get("name"))!=null&&c.errors&&((c=r.registerForm.get("name"))!=null&&c.touched||(c=r.registerForm.get("name"))!=null&&c.dirty)?8:-1),m(5),d(13,(f=r.registerForm.get("email"))!=null&&f.errors&&((f=r.registerForm.get("email"))!=null&&f.touched)?13:-1),m(5),d(18,(C=r.registerForm.get("password"))!=null&&C.errors&&((C=r.registerForm.get("password"))!=null&&C.touched)?18:-1),m(5),d(23,r.registerForm.getError("mismatch")&&((F=r.registerForm.get("rePassword"))!=null&&F.touched)?23:-1),m(5),d(28,(h=r.registerForm.get("phone"))!=null&&h.errors&&((h=r.registerForm.get("phone"))!=null&&h.touched)?28:-1),m(),E("disabled",r.registerForm.invalid||r.isLoading),m(2),d(31,r.isLoading?31:-1),m(),d(32,r.errorMessage!=""?32:-1),m(),d(33,r.successMessage?33:-1)}},dependencies:[B,L,P,q,M,D,A,T]})}}return e})();export{de as RegisterComponent};
